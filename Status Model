@startuml
[*] --> ЧЕРНОВИК

ЧЕРНОВИК --> ОФОРМЛЕН : Подтвердить

ОФОРМЛЕН --> ОПЛАЧЕН : Оплатить (предоплата)
ОФОРМЛЕН --> ВЫПОЛНЕН : Начать выполнение
ОФОРМЛЕН --> ОТМЕНЕН : Отменить

ОПЛАЧЕН --> ВЫПОЛНЕН : Выполнить услугу

ВЫПОЛНЕН --> ОПЛАЧЕН : Оплатить (постоплата)
ВЫПОЛНЕН --> ЗАВЕРШЕН : Завершить

ОПЛАЧЕН --> ЗАВЕРШЕН : Завершить

ОТМЕНЕН --> [*] : Закрыть
ЗАВЕРШЕН --> [*] : Закрыть

note right of ОФОРМЛЕН
  Возможные действия:
  - Оплатить (до выполнения)
  - Начать выполнение
  - Отменить
end note

note right of ОПЛАЧЕН
  Состояние "ОПЛАЧЕН" может быть
  достигнуто ДО или ПОСЛЕ выполнения.
end note

note right of ВЫПОЛНЕН
  После выполнения возможна оплата,
  если она не была произведена ранее.
end note

@enduml
